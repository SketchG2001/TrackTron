{% extends 'employee/hrbase.html' %}
{% block title %}
	All Employee reports
{% endblock %}
{% block content %}
	   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<form id="reportForm">
    <label for="month">Month:</label>
    <input type="number" id="month" name="month" min="1" max="12" required>
    <label for="year">Year:</label>
    <input type="number" id="year" name="year" min="1900" max="2100" required>
    <button type="submit">Load Reports</button>
</form>

<!-- Display area for loaded reports -->
<div id="reportContainer">
    <!-- Reports will be loaded dynamically here -->
</div>

<script>
$(document).ready(function() {
    // Intercept form submission using AJAX
    $('#reportForm').on('submit', function(event) {
        event.preventDefault();  // Prevent default form submission

        // Get form data (month and year)
        var formData = {
            'month': $('#month').val(),
            'year': $('#year').val()
        };

        // Send AJAX request to retrieve reports
        $.ajax({
            type: 'GET',
            url: '{% url 'employee_reports' %}',
            data: formData,
            success: function(response) {
                $('#reportContainer').html(response);  // Display loaded reports in container
            },
            error: function(xhr, status, error) {
                console.error(xhr.responseText);
                alert('Failed to load reports. Please try again.');
            }
        });
    });
});
</script>


{% endblock %}
 